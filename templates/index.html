<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Link Extractor & Replacer</title>
</head>
<body>
    <h1>Nhập văn bản chứa liên kết</h1>
    
    <!-- Form để nhập văn bản và thao tác -->
    <form method="post">
        <!-- Khung nhập văn bản -->
        <textarea name="text" rows="10" cols="50" placeholder="Nhập văn bản chứa liên kết...">{{ replaced_text if replaced_text else text }}</textarea><br><br>
        
        <!-- Nút Tạo file Excel -->
        <button type="submit" name="create_excel">Tạo file Excel</button>

        <!-- Nút Lọc Liên Kết -->
        <button type="submit" name="filter_links">Lọc liên kết</button>

        <!-- Nút Xóa Văn Bản -->
        <button type="submit" name="clear_text">Xóa văn bản</button><br><br>

        <!-- Hiển thị các liên kết đã lọc và ô để nhập liên kết thay thế -->
        {% if links %}
        <h2>Các liên kết đã lọc:</h2>
        <ul>
            {% for link in links %}
            <li>{{ link }}</li>
            {% endfor %}
        </ul>
        <br>
        <h3>Nhập liên kết thay thế (mỗi liên kết trên một dòng, theo thứ tự tương ứng):</h3>
        <textarea name="replacement_links" rows="10" cols="50" placeholder="Nhập các liên kết thay thế tại đây..."></textarea><br>
        <!-- Nút Thay Liên Kết -->
        <button type="submit" name="replace_links">Thay liên kết</button><br><br>
        {% endif %}
    </form>

    <!-- Hiển thị kết quả sau khi thay liên kết -->
    {% if replaced_text %}
    <h2>Văn bản sau khi thay liên kết:</h2>
    <textarea rows="10" cols="50">{{ replaced_text }}</textarea><br><br>
    <button onclick="copyText()">Sao chép văn bản</button>
    {% endif %}

    <script>
        // Hàm sao chép văn bản
        function copyText() {
            var textarea = document.querySelector('textarea');
            textarea.select();
            document.execCommand('copy');
            alert('Văn bản đã được sao chép!');
        }
    </script>
</body>
</html>
